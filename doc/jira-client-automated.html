<html><head><title>JIRA::Client::Automated</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="http://search.cpan.org/s/style.css">

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.14,
  using Pod::Simple::PullParser v3.14,
  under Perl v5.012004 at Mon Jul 29 06:56:56 2013 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#WORKING_WITH_JIRA'>WORKING WITH JIRA</a>
  <li class='indexItem indexItem1'><a href='#JIRA_ISSUE_HASH_FORMAT'>JIRA ISSUE HASH FORMAT</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#create_issue'>create_issue</a>
    <li class='indexItem indexItem2'><a href='#update_issue'>update_issue</a>
    <li class='indexItem indexItem2'><a href='#get_issue'>get_issue</a>
    <li class='indexItem indexItem2'><a href='#transition_issue'>transition_issue</a>
    <li class='indexItem indexItem2'><a href='#close_issue'>close_issue</a>
    <li class='indexItem indexItem2'><a href='#delete_issue'>delete_issue</a>
    <li class='indexItem indexItem2'><a href='#create_comment'>create_comment</a>
    <li class='indexItem indexItem2'><a href='#search_issues'>search_issues</a>
    <li class='indexItem indexItem2'><a href='#all_search_results'>all_search_results</a>
    <li class='indexItem indexItem2'><a href='#attach_file_to_issue'>attach_file_to_issue</a>
    <li class='indexItem indexItem2'><a href='#make_browse_url'>make_browse_url</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FAQ'>FAQ</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Why_is_there_no_object_for_a_JIRA_issue%3F'>Why is there no object for a JIRA issue?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>JIRA::Client::Automated</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 1.0</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use JIRA::Client::Automated;

    my $jira = JIRA::Client::Automated-&#62;new($url, $user, $password);
    my $issue = $jira-&#62;create_issue($project, $type, $summary, $description);
    my $search_results = $jira-&#62;search_issues($jql, 1, 100); # query should be a single string of JQL
    my @issues = $jira-&#62;all_search_results($jql, 1000); # query should be a single string of JQL
    my $issue = $jira-&#62;get_issue($key);
    $jira-&#62;update_issue($key, $update_hash); # update_hash is { field =&#62; value, ... }
    $jira-&#62;create_comment($key, $text);
    $jira-&#62;attach_file_to_issue($key, $filename);
    $jira-&#62;transition_issue($key, $transition, $transition_hash); # transition_hash is { field =&#62; value, ... }
    $jira-&#62;close_issue($key, $resolve, $message); # resolve is the resolution value
    $jira-&#62;delete_issue($key);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>JIRA::Client::Automated is an adapter between any automated system and JIRA&#39;s REST API. This module is explicitly designed to easily create and close issues within a JIRA instance via automated scripts.</p>

<p>For example, if you run nightly batch jobs, you can use JIRA::Client::Automated to have those jobs automatically create issues in JIRA for you when the script runs into errors. You can attach error log files to the issues and then they&#39;ll be waiting in someone&#39;s open issues list when they arrive at work the next day.</p>

<p>If you want to avoid creating the same issue more than once you can search JIRA for it first, only creating it if it doesn&#39;t exist. If it does already exist you can add a comment or a new error log to that issue.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="WORKING_WITH_JIRA"
>WORKING WITH JIRA</a></h1>

<p>Atlassian has made a very complete REST API for recent (&#62; 5.0) versions of JIRA. By virtue of being complete it is also somewhat large and a little complex for the beginner. Reading their tutorials is *highly* recommended before you start making hashes to update or transition issues.</p>

<p><a href="https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs" class="podlinkurl"
>https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs</a></p>

<p>This module is designed for the JIRA 5.2.11 REST API, as of March 2013, but it seems to work fine with JIRA 6.0 as well. Your mileage may vary with future versions.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="JIRA_ISSUE_HASH_FORMAT"
>JIRA ISSUE HASH FORMAT</a></h1>

<p>When you work with an issue in JIRA&#39;s REST API, it gives you a JSON file that follows this spec:</p>

<p><a href="https://developer.atlassian.com/display/JIRADEV/The+Shape+of+an+Issue+in+JIRA+REST+APIs" class="podlinkurl"
>https://developer.atlassian.com/display/JIRADEV/The+Shape+of+an+Issue+in+JIRA+REST+APIs</a></p>

<p>JIRA::Client::Automated tries to be nice to you and not make you deal directly with JSON. When you create a new issue, you can pass in just the pieces you want and <a href="#create_issue" class="podlinkpod"
>&#34;create_issue&#34;</a> will transform them to JSON for you. The same for closing and deleting issues. However there&#39;s not much I can do about updating or transitioning issues. Each JIRA installation will have different fields available for each issue type and transition screen and only you will know what they are. So in those cases you&#39;ll need to pass in an &#34;update_hash&#34; which will be transformed to the proper JSON by the method.</p>

<p>An update_hash looks like this:</p>

<pre>    { field =&#62; value, field2 =&#62; value2, ...}</pre>

<p>For example:</p>

<pre>    {
        host_id =&#62; &#34;example.com&#34;, 
        { resolution =&#62; { name =&#62; &#34;Resolved&#34; } } 
    }</pre>

<p>If you do not read JIRA&#39;s documentation about their JSON format you will hurt yourself banging your head against your desk in frustration the first few times you try to use <a href="#update_issue" class="podlinkpod"
>&#34;update_issue&#34;</a>. Please RTFM.</p>

<p>Note that even though JIRA requires JSON, JIRA::Client::Automated will helpfully translate it to and from regular hashes for you. You only pass hashes to JIRA::Client::Automated, not direct JSON.</p>

<p>But, since you aren&#39;t going to read the documentation, I recommend connecting to your JIRA server and calling <a href="#get_issue" class="podlinkpod"
>&#34;get_issue&#34;</a> with a key you know exists and then dump the result. That&#39;ll get you started.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre>    my $jira = JIRA::Client::Automated-&#62;new($url, $user, $password);</pre>

<p>Create a new JIRA::Client::Automated object by passing in the following:</p>

<ol>
<li>URL for the JIRA server, such as &#34;http://example.atlassian.net/&#34;</li>

<li>Username to use to login to the JIRA server</li>

<li>Password for that user</li>
</ol>

<p>All three parameters are required. JIRA::Client::Automated must connect to the JIRA instance using <i>some</i> username and password. I recommend setting up a special &#34;auto&#34; or &#34;batch&#34; username to use just for use by scripts.</p>

<p>If you are using Google Account integration, the username and password to use are the ones you set up at the very beginning of the registration process and then never used again because Google logged you in.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="create_issue"
>create_issue</a></h2>

<pre>    my $issue = $jira-&#62;create_issue($project, $type, $summary, $description);</pre>

<p>Creating a new issue requires the project key, type (&#34;Bug&#34;, &#34;Task&#34;, etc.), and a summary and description. Other fields that are on the new issue form could be supported by a subclass, but it&#39;s probably easier to use <a href="#update_issue" class="podlinkpod"
>&#34;update_issue&#34;</a> with JIRA&#39;s syntax for now.</p>

<p>Returns a hash containing the information about the new issue or dies if there is an error. See <a href="#JIRA_ISSUE_HASH_FORMAT" class="podlinkpod"
>&#34;JIRA ISSUE HASH FORMAT&#34;</a> for details of the hash.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_issue"
>update_issue</a></h2>

<pre>    $jira-&#62;update_issue($key, $update_hash); </pre>

<p>Updating an issue is one place where JIRA&#39;s REST API shows through. You pass in the issue key and update_hash with only the field changes you want in it. See <a href="#JIRA_ISSUE_HASH_FORMAT" class="podlinkpod"
>&#34;JIRA ISSUE HASH FORMAT&#34;</a>, above, for details about the format of the update_hash.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_issue"
>get_issue</a></h2>

<pre>    my $issue = $jira-&#62;get_issue($key);</pre>

<p>You can get the details for any issue, given its key. This call returns a hash containing the information for the issue in JIRA&#39;s format. See <a href="#JIRA_ISSUE_HASH_FORMAT" class="podlinkpod"
>&#34;JIRA ISSUE HASH FORMAT&#34;</a> for details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="transition_issue"
>transition_issue</a></h2>

<pre>    $jira-&#62;transition_issue($key, $transition, $update_hash);</pre>

<p>Transitioning an issue is what happens when you click the button that says &#34;Resolve Issue&#34; or &#34;Start Progress&#34; on it. Doing this from code is harder, but JIRA::Client::Automated makes it as easy as possible. You pass this method the issue key, the name of the transition (spacing and capitalization matter), and an optional update_hash containing any fields on the transition screen that you want to update.</p>

<p>If you have required fields on the transition screen (such as &#34;Resolution&#34; for the &#34;Resolve Issue&#34; screen), you must pass those fields in as part of the update_hash or you will get an error from the server. See <a href="#JIRA_ISSUE_HASH_FORMAT" class="podlinkpod"
>&#34;JIRA ISSUE HASH FORMAT&#34;</a> for the format of the update_hash.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="close_issue"
>close_issue</a></h2>

<pre>    $jira-&#62;close_issue($key, $resolve, $message);</pre>

<p>Pass in the resolution reason and an optional comment to close an issue. Using this method requires that the issue is is a status where it can use the &#34;Close Issue&#34; transition. If not, you will get an error from the server.</p>

<p>Resolution (&#34;Fixed&#34;, &#34;Won&#39;t Fix&#34;, etc.) is only required if the issue hasn&#39;t already been resolved in an earlier transition. If you try to resolve an issue twice, you will get an error.</p>

<p>If you do not supply a comment, the default value is &#34;Issue closed by script&#34;.</p>

<p>If your JIRA installation has extra required fields on the &#34;Close Issue&#34; screen then you&#39;ll want to use the more generic <a href="#transition_issue" class="podlinkpod"
>&#34;transition_issue&#34;</a> call instead.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delete_issue"
>delete_issue</a></h2>

<pre>    $jira-&#62;delete_issue($key);</pre>

<p>Deleting issues is for testing your JIRA code. In real situations you almost always want to close unwanted issues with an &#34;Oops!&#34; resolution instead.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="create_comment"
>create_comment</a></h2>

<pre>    $jira-&#62;create_comment($key, $text);</pre>

<p>You may use any valid JIRA markup in comment text. (This is handy for tables of values explaining why something in the database is wrong.) Note that comments are all created by the user you used to create your JIRA::Client::Automated object, so you&#39;ll see that name often.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="search_issues"
>search_issues</a></h2>

<pre>    my @search_results = $jira-&#62;search_issues($jql, 1, 100); </pre>

<p>You&#39;ve used JQL before, when you did an &#34;Advanced Search&#34; in the JIRA web interface. That&#39;s the only way to search via the REST API.</p>

<p>This is a paged method. Pass in the starting result number and number of results per page and it will return issues a page at a time. If you know you want all of the results, you can use <a href="#all_search_results" class="podlinkpod"
>&#34;all_search_results&#34;</a> instead.</p>

<p>This method returns a hashref containing up to five values:</p>

<ol>
<li>total =&#62; total number of results</li>

<li>start =&#62; result number for the first result</li>

<li>max =&#62; maximum number of results per page</li>

<li>issues =&#62; an arrayref containing the actual found issues</li>

<li>errors =&#62; an arrayref containing error messages</li>
</ol>

<p>For example, to page through all results <code>$max</code> at a time:</p>

<pre>    my (@all_results, $issues);
    do {
        ($total, $start, $max, $issues) = $self-&#62;search_issues($jql, $start, $max);
        push @all_results, @$issues;
        $start += $max;
    } until (scalar(@$issues) &#60; $max);</pre>

<p>(Or just use <a href="#all_search_results" class="podlinkpod"
>&#34;all_search_results&#34;</a> instead.)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="all_search_results"
>all_search_results</a></h2>

<pre>    my @issues = $jira-&#62;all_search_results($jql, 1000); </pre>

<p>Like <a href="#search_issues" class="podlinkpod"
>&#34;search_issues&#34;</a>, but returns all the results as an array of issues. You can specify the maximum number to return, but no matter what, it can&#39;t return more than the value of jira.search.views.default.max for your JIRA installation.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="attach_file_to_issue"
>attach_file_to_issue</a></h2>

<pre>    $jira-&#62;attach_file_to_issue($key, $filename);</pre>

<p>This method does not let you attach a comment to the issue at the same time. You&#39;ll need to call <a href="#create_comment" class="podlinkpod"
>&#34;create_comment&#34;</a> for that.</p>

<p>Watch out for file permissions! If the user running the script does not have permission to read the file it is trying to upload, you&#39;ll get weird errors.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="make_browse_url"
>make_browse_url</a></h2>

<pre>    my $url = $jira-&#62;make_browse_url($key);</pre>

<p>A helper method to make emails containing lists of bugs easier to use. This just appends the key to the URL for the JIRA server so that you can click on it and go directly to that issue.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FAQ"
>FAQ</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_is_there_no_object_for_a_JIRA_issue?"
>Why is there no object for a JIRA issue?</a></h2>

<p>Because it seemed silly. You <i>could</i> write such an object and give it methods to transition itself, close itself, etc., but when you are working with JIRA from batch scripts, you&#39;re never really working with just one issue at a time. And when you have a hundred of them, it&#39;s easier to not objectify them and just use JIRA::Client::Automated as a mediator. That said, if this is important to you, I wouldn&#39;t say no to a patch offering this option.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>Please report bugs or feature requests to the author.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Michael Friedman &#60;frimicc@cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Polyvore, Inc.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>

<!-- end doc -->

</body></html>
